<!DOCTYPE html>
<html>
<head>
  <title>AUDIT-C Alcohol Assessment</title>
 
  <style>
  body {
    font-family: Arial, sans-serif;
    background-color: #fff; /* light blue */
    margin: 0;
    padding: 1rem;
    box-sizing: border-box;
  }

  form {
    max-width: 600px;
    margin: auto;
    background: #c3d7ec;
    padding: 1rem;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  h2 {
    text-align: center;
    color: #003366;
  }

  label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
  }

  select, input[type="text"], input[type="date"] {
    width: 100%;
    padding: 8px;
    margin-top: 4px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }

  button {
    background-color: #003366;
    color: white;
    padding: 10px;
    margin-top: 15px;
    border: none;
    border-radius: 5px;
    width: 100%;
    font-size: 1rem;
  }

  .audit-q4-10 {
    display: none;
    margin-top: 20px;
  }

  @media (max-width: 600px) {
    body {
      padding: 10px;
    }

    form {
      padding: 1rem;
    }
  }
  
  .question-section {
  background-color: #d9e8f6;  /* Light blue box */
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  margin-top: 20px;
}

</style>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  

    
	
 
</head>
<body>

  <h2>Alcohol Assessment - AUDIT C</h2> 
  
 
  <!-- Demographics -->
  <label>Record No: <input type="text" id="recordNo" /></label>
  <label>Date Recorded: <input type="date" id="dateRecorded" /></label>
  <label>Recorded By: <input type="text" id="recordedBy" /></label>

  <hr> 

  <!-- Questions 1–3 -->
  
  
  
  <label for="q1">1. How often do you have a drink containing alcohol? <span style="color: red">*</span></label>
  
  <select id="q1"  required onchange="calculateScores()">
    <option value="" disabled selected hidden>-- Select --</option>
    <!-- <option value="">-- Select --</option>  -->
    <option value="0">Never</option>
    <option value="1">Monthly or less</option>
    <option value="2">2–4 times a month</option>
    <option value="3">2–3 times a week</option>
    <option value="4">4 or more times a week</option>
  </select>
  
  <label for="q2">2. How many units of alcohol do you drink on a typical day when you are drinking? <span style="color: red">*</span></label>
  <select id="q2" required  onchange="calculateScores()">
    <option value=""disabled selected hidden>-- Select --</option>
    <option value="0">1 or 2</option>
    <option value="1">3 or 4</option>
    <option value="2">5 or 6</option>
    <option value="3">7–9</option>
    <option value="4">10 or more</option>
  </select>

  <label for="q3">3. How often have you had 6 or more units (female) or 8 or more (male), on a single occasion in the last year?   <span style="color: red">*</span></label>
  <select id="q3"  required  onchange="calculateScores()">
    <option value=""disabled selected hidden>-- Select --</option>
    <option value="0">Never</option>
    <option value="1">Less than monthly</option>
    <option value="2">Monthly</option>
    <option value="3">Weekly</option>
    <option value="4">Daily or almost daily</option>
  </select>

  <p><strong>FAST C Score:</strong> <span id="fastScore">0</span></p> 
  

  <!-- Questions 4–10 (Hidden until FAST C score ≥ 5) -->
  <div class="audit-q4-10">
    <label for="q4">4. How often during the last year have you found that you were not able to stop drinking once you had started?</label>
    <select id="q4" onchange="calculateScores()">
      <option value="">-- Select --</option>
      <option value="0">Never</option>
      <option value="1">Less than monthly</option>
      <option value="2">Monthly</option>
      <option value="3">Weekly</option>
      <option value="4">Daily or almost daily</option>
    </select>

    <label for="q5">5. How often during the last year have you failed to do what was normally expected from you because of your drinking?</label>
    <select id="q5" onchange="calculateScores()">
      <option value="">-- Select --</option>
      <option value="0">Never</option>
      <option value="1">Less than monthly</option>
      <option value="2">Monthly</option>
      <option value="3">Weekly</option>
      <option value="4">Daily or almost daily</option>
    </select>

    <label for="q6">6. How often during the last year have you needed an alcoholic drink in the morning to get yourself going after a heavy drinking session?</label>
    <select id="q6" onchange="calculateScores()">
      <option value="">-- Select --</option>
      <option value="0">Never</option>
      <option value="1">Less than monthly</option>
      <option value="2">Monthly</option>
      <option value="3">Weekly</option>
      <option value="4">Daily or almost daily</option>
    </select>

    <label for="q7">7. How often during the last year have you had a feeling of guilt or remorse after drinking?</label>
    <select id="q7" onchange="calculateScores()">
      <option value="">-- Select --</option>
      <option value="0">Never</option>
      <option value="1">Less than monthly</option>
      <option value="2">Monthly</option>
      <option value="3">Weekly</option>
      <option value="4">Daily or almost daily</option>
    </select>

    <label for="q8">8. How often during the last year have you been unable to remember what happened the night before because you had been drinking?</label>
    <select id="q8" onchange="calculateScores()">
      <option value="">-- Select --</option>
      <option value="0">Never</option>
      <option value="1">Less than monthly</option>
      <option value="2">Monthly</option>
      <option value="3">Weekly</option>
      <option value="4">Daily or almost daily</option>
    </select>

    <label for="q9">9. Have you or somebody else been injured as a result of your drinking?</label>
    <select id="q9" onchange="calculateScores()">
      <option value="">-- Select --</option>
      <option value="0">No</option>
      <option value="2">Yes, but not in the last year</option>
      <option value="4">Yes, during the last year</option>
    </select>

    <label for="q10">10. Has a relative or friend, doctor or other health worker been concerned about your drinking or suggested that you cut down?</label>
    <select id="q10" onchange="calculateScores()">
      <option value="">-- Select --</option>
      <option value="0">No</option>
      <option value="2">Yes, but not in the last year</option>
      <option value="4">Yes, during the last year</option>
    </select>
  </div>

  <p><strong>Total Audit Score:</strong> <span id="totalScore">0</span></p>

  <!-- Submit Button -->
  <!-- <button type="submit" onclick="submitForm()">Submit</button>  -->

  <script>
  
  

   function calculateScores() {
  const getVal = id => document.getElementById(id).value;

  const q1 = getVal("q1");
  const q2 = getVal("q2");
  const q3 = getVal("q3");

  // If any required question is unanswered, reset scores and hide Q4–Q10
  if (q1 === "" || q2 === "" || q3 === "") {
    document.getElementById("fastScore").textContent = "0";
    document.getElementById("totalScore").textContent = "0";
    document.querySelector(".audit-q4-10").style.display = "none";
    return;  // Stop calculation until all required answered
  }

  // Calculate FAST C score
  const fastC = [q1, q2, q3].reduce((sum, val) => sum + parseInt(val), 0);

  // Sum optional questions (q4 to q10), treat empty as 0
  const optionalQs = ["q4","q5","q6","q7","q8","q9","q10"];
  const optionalSum = optionalQs.reduce((sum, id) => {
    const val = getVal(id);
    return sum + (val === "" ? 0 : parseInt(val));
  }, 0);

  const total = fastC + optionalSum;

  // Update scores in UI
  document.getElementById("fastScore").textContent = fastC;
  document.getElementById("totalScore").textContent = total;

  // Show questions 4–10 only if FAST C score >= 5
  document.querySelector(".audit-q4-10").style.display = fastC >= 5 ? "block" : "none";
}


    function submitForm() {
      alert("Form submitted! (Hook up your backend here)");
    }
  </script>


<form id="auditForm" onsubmit="return validateForm()">
  
  
    <!-- Your fields here -->
  <button type="submit">Submit</button>
  
 
  
<button type="button" onclick="previewQuestionnaireResponse()">Preview JSON</button
<pre id="jsonOutput" style="background: #f9f9f9; padding: 10px; margin-top: 15px;"></pre>
</form>

</body>
</html>

<script>
  function previewQuestionnaireResponse() {
  const getValue = id => {
    const el = document.getElementById(id);
    return el && el.value !== "" ? el.value : null;
  };

  // ✅ Validate that Q1–Q3 are answered
  for (let i = 1; i <= 3; i++) {
    if (!getValue(`q${i}`)) {
      alert(`Please answer Question ${i} before proceeding.`);
      return;
    }
  }

  // ✅ Continue building the response if all required are filled
  const now = new Date().toISOString();

  const response = {
    resourceType: "QuestionnaireResponse",
    status: "completed",
    authored: now,
    item: []
  };

  // ... rest of your existing code continues

      }
    }

    // Optional: include metadata
    const recordedBy = getValue("recordedBy");
    const dateRecorded = getValue("dateRecorded");
    const recordNo = getValue("recordNo");

    if (recordedBy || dateRecorded || recordNo) {
      response.contained = [{
        resourceType: "Basic",
        id: "meta",
        extension: [
          { url: "recordedBy", valueString: recordedBy || "" },
          { url: "recordNo", valueString: recordNo || "" },
          { url: "dateRecorded", valueDate: dateRecorded || "" }
        ]
      }];
    }

    // Show JSON in <pre> block
    document.getElementById("jsonOutput").textContent = JSON.stringify(response, null, 2);
  }
</script>

<script>

function validateForm() {
  const q1 = document.getElementById('q1').value;
  const q2 = document.getElementById('q2').value;
  const q3 = document.getElementById('q3').value;

  if (q1 === "") {
    alert("Please answer question 1.");
    return false;
  }
  if (q2 === "") {
    alert("Please answer question 2.");
    return false;
  }
  if (q3 === "") {
    alert("Please answer question 3.");
    return false;
  }

  alert("Form submitted! (Hook up your backend here)");
  return true;  // allows form to submit if you want real submission or just true to simulate
}


</script>




</body>
</html>

